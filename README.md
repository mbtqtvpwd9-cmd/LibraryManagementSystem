# å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºSpring Bootçš„ç°ä»£åŒ–å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä¸“ä¸šçº§UI/UXè®¾è®¡å’Œå®Œæ•´çš„åŠŸèƒ½å®ç°ï¼Œæ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- âœ… ç”¨æˆ·è®¤è¯å’Œæˆæƒï¼ˆç®¡ç†å‘˜å’Œè¯»è€…è§’è‰²ï¼‰
- âœ… å›¾ä¹¦ä¿¡æ¯ç®¡ç†ï¼ˆå®Œæ•´CRUDæ“ä½œï¼‰
- âœ… å›¾ä¹¦ç¼–è¾‘åŠŸèƒ½ï¼ˆæ”¯æŒåˆ†ç±»ã€è¯­è¨€ã€ä½ç½®ç­‰ï¼‰
- âœ… é«˜çº§æœç´¢å’Œç­›é€‰ï¼ˆå¤šæ¡ä»¶ç»„åˆæœç´¢ï¼‰
- âœ… å€Ÿé˜…ç®¡ç†ç³»ç»Ÿï¼ˆå€Ÿä¹¦ã€è¿˜ä¹¦ã€ç»­å€Ÿï¼‰
- âœ… ç»Ÿè®¡æŠ¥è¡¨ä»ªè¡¨ç›˜
- âœ… åˆ†é¡µæŸ¥è¯¢å’Œæ’åº
- âœ… RESTful APIè®¾è®¡
- âœ… JWTä»¤ç‰Œè®¤è¯
- âœ… æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†

### ğŸ¨ ç•Œé¢ç‰¹æ€§
- âœ… ç°ä»£åŒ–å“åº”å¼è®¾è®¡
- âœ… ç½‘æ ¼å’Œåˆ—è¡¨åŒè§†å›¾æ¨¡å¼
- âœ… ç¾è§‚çš„å¡ç‰‡å¼å¸ƒå±€
- âœ… æµ®åŠ¨æ“ä½œæŒ‰é’®
- âœ… æ¨¡æ€æ¡†ç¼–è¾‘ç•Œé¢
- âœ… å®æ—¶æœç´¢å’Œç­›é€‰
- âœ… ç»Ÿè®¡æ•°æ®å¯è§†åŒ–

### ğŸ“š å›¾ä¹¦ç®¡ç†
- âœ… å›¾ä¹¦åŸºæœ¬ä¿¡æ¯ï¼ˆISBNã€ä¹¦åã€ä½œè€…ã€å‡ºç‰ˆç¤¾ï¼‰
- âœ… æ‰©å±•ä¿¡æ¯ï¼ˆåˆ†ç±»ã€è¯­è¨€ã€å­˜æ”¾ä½ç½®ï¼‰
- âœ… åº“å­˜ç®¡ç†ï¼ˆæ€»æ•°é‡ã€å·²å€Ÿå‡ºæ•°é‡ï¼‰
- âœ… ä»·æ ¼å’Œå‡ºç‰ˆä¿¡æ¯
- âœ… å°é¢å›¾ç‰‡æ”¯æŒ
- âœ… å›¾ä¹¦çŠ¶æ€ç®¡ç†

### ğŸ”„ å€Ÿé˜…ç®¡ç†
- âœ… å›¾ä¹¦å€Ÿé˜…ç”³è¯·
- âœ… å€Ÿé˜…æœŸé™ç®¡ç†
- âœ… å›¾ä¹¦å½’è¿˜å¤„ç†
- âœ… ç»­å€ŸåŠŸèƒ½
- âœ… é€¾æœŸæé†’
- âœ… å€Ÿé˜…å†å²è®°å½•

### ğŸ‘¥ ç”¨æˆ·è§’è‰²
- **ç®¡ç†å‘˜ (admin/admin123)**: å®Œæ•´ç®¡ç†æƒé™
- **è¯»è€… (reader/reader123)**: æŸ¥è¯¢å’Œå€Ÿé˜…æƒé™

### ğŸŒ æŠ€æœ¯æ ˆ
- **åç«¯**: Java 17, Spring Boot 3.2.0, Spring Security, Spring Data JPA
- **å‰ç«¯**: Vue 3, Vite, TypeScript, Element Plus
- **æ•°æ®åº“**: PostgreSQL, Redis
- **è®¤è¯**: JWT (JSON Web Token)
- **å®¹å™¨åŒ–**: Docker

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/mbtqtvpwd9-cmd/LibraryManagementSystem.git
cd LibraryManagementSystem
git checkout advanced-tech-stack
```

2. **ç¯å¢ƒè¦æ±‚**
- Java 17+
- Node.js 18+
- Maven 3.6+
- Docker & Docker Compose

3. **è¿è¡Œåº”ç”¨**
```bash
# æ„å»ºåç«¯
cd backend-microservices
mvn clean package -DskipTests
cd ..

# æ„å»ºå‰ç«¯
cd frontend-vue
npm install
npm run build
cd ..

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d
```

4. **è®¿é—®åº”ç”¨**
- ğŸŒŸ å‰ç«¯åº”ç”¨: http://localhost:3000
- ğŸ“Š APIç½‘å…³: http://localhost:8080

## è…¾è®¯äº‘éƒ¨ç½²æŒ‡å—

### 1. å‡†å¤‡å·¥ä½œ
- è…¾è®¯äº‘Ubuntu 22.04æœåŠ¡å™¨
- æœåŠ¡å™¨IP: 150.158.125.55
- å¼€æ”¾ç«¯å£: 3000 (å‰ç«¯), 8080 (åç«¯API)

### 2. å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. ç™»å½•æœåŠ¡å™¨
ssh root@150.158.125.55

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/mbtqtvpwd9-cmd/LibraryManagementSystem.git
cd LibraryManagementSystem
git checkout advanced-tech-stack

# 3. ä¸€é”®éƒ¨ç½²
./java-fix-deploy.sh

# 4. éƒ¨ç½²æ£€æŸ¥
./check-deployment.sh
```

### 3. éƒ¨ç½²è„šæœ¬è¯´æ˜

| è„šæœ¬åç§° | ç”¨é€” |
|---------|------|
| `java-fix-deploy.sh` | å®Œæ•´éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰|
| `manual-deploy.sh` | æ‰‹åŠ¨æ›´æ–°éƒ¨ç½²è„šæœ¬ |
| `check-deployment.sh` | æ£€æŸ¥éƒ¨ç½²çŠ¶æ€ |
| `troubleshoot-network.sh` | ç½‘ç»œé—®é¢˜æ’æŸ¥ |
| `fix-nginx-403-v2.sh` | ä¿®å¤Nginx 403é”™è¯¯ |
| `fix-vue-build.sh` | ä¿®å¤Vueæ„å»ºé—®é¢˜ |

### 4. å¸¸è§é—®é¢˜è§£å†³

#### Javaç‰ˆæœ¬é—®é¢˜
```bash
./java-fix-deploy.sh  # è‡ªåŠ¨å®‰è£…Java 17
```

#### å‰ç«¯æ„å»ºé—®é¢˜
```bash
./fix-vue-build.sh  # ä¿®å¤TypeScriptç¼–è¯‘é”™è¯¯
```

#### ç½‘ç»œè®¿é—®é—®é¢˜
```bash
./troubleshoot-network.sh  # æ’æŸ¥ç½‘ç»œé—®é¢˜
```

#### Nginx 403é”™è¯¯
```bash
./fix-nginx-403-v2.sh  # ä¿®å¤æƒé™å’Œé…ç½®é—®é¢˜
```

### 5. æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

å¦‚æœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼Œå¯æ‰§è¡Œä»¥ä¸‹æ‰‹åŠ¨å‘½ä»¤ï¼š

```bash
# 1. åœæ­¢æ—§å®¹å™¨
docker stop $(docker ps -aq) 2>/dev/null || true
docker rm $(docker ps -aq) 2>/dev/null || true

# 2. åˆ›å»ºç½‘ç»œ
docker network create library-network 2>/dev/null || true

# 3. å¯åŠ¨åŸºç¡€æœåŠ¡
docker run -d --name postgres \
  --network library-network \
  -e POSTGRES_DB=library \
  -e POSTGRES_USER=library \
  -e POSTGRES_PASSWORD=library123 \
  -p 5432:5432 \
  postgres:15

docker run -d --name redis \
  --network library-network \
  -p 6379:6379 \
  redis:7-alpine

# 4. ç­‰å¾…åŸºç¡€æœåŠ¡å¯åŠ¨
sleep 30

# 5. æ„å»ºåç«¯
mvn clean package -DskipTests

# 6. æ„å»ºå‰ç«¯
cd frontend-vue
npm install
npm run build
cd ..

# 7. å¯åŠ¨åº”ç”¨æœåŠ¡
docker run -d --name library-backend \
  --network library-network \
  -p 8080:8080 \
  -v $(pwd)/target/library-management-system.jar:/app.jar \
  openjdk:17-jdk-slim \
  java -jar -Dserver.address=0.0.0.0 /app.jar

docker run -d --name library-frontend \
  --network library-network \
  -p 3000:80 \
  -v $(pwd)/frontend-vue/dist:/usr/share/nginx/html:ro \
  nginx:alpine

# 8. æ£€æŸ¥çŠ¶æ€
sleep 30
docker ps
```

## å¾®æœåŠ¡æ¶æ„

### æœåŠ¡ç»„ä»¶
- **APIç½‘å…³** (8080): ç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±å’Œè´Ÿè½½å‡è¡¡
- **å›¾ä¹¦æœåŠ¡** (8081): å›¾ä¹¦ä¿¡æ¯ç®¡ç†
- **ç”¨æˆ·æœåŠ¡** (8082): ç”¨æˆ·è®¤è¯å’Œç®¡ç†
- **å€Ÿé˜…æœåŠ¡** (8083): å›¾ä¹¦å€Ÿé˜…ç®¡ç†
- **å‰ç«¯åº”ç”¨** (3000): Vue 3å•é¡µåº”ç”¨
- **æ•°æ®åº“**: PostgreSQL + Redis

## APIæ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `POST /api/auth/logout` - ç”¨æˆ·é€€å‡º

### å›¾ä¹¦æ¥å£
- `GET /api/books` - è·å–å›¾ä¹¦åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- `GET /api/books/{id}` - è·å–å•æœ¬å›¾ä¹¦
- `GET /api/books/search` - æœç´¢å›¾ä¹¦
- `POST /api/books` - æ·»åŠ å›¾ä¹¦ï¼ˆç®¡ç†å‘˜ï¼‰
- `PUT /api/books/{id}` - æ›´æ–°å›¾ä¹¦ï¼ˆç®¡ç†å‘˜ï¼‰
- `DELETE /api/books/{id}` - åˆ é™¤å›¾ä¹¦ï¼ˆç®¡ç†å‘˜ï¼‰

## æ•°æ®åº“ç»“æ„

### å›¾ä¹¦è¡¨ (books)
- id: ä¸»é”®
- isbn: ISBNå·ï¼ˆå”¯ä¸€ï¼‰
- title: ä¹¦å
- author: ä½œè€…
- publisher: å‡ºç‰ˆç¤¾
- publishYear: å‡ºç‰ˆå¹´ä»½
- price: ä»·æ ¼
- stockQuantity: åº“å­˜æ•°é‡
- description: æè¿°

### ç”¨æˆ·è¡¨ (users)
- id: ä¸»é”®
- username: ç”¨æˆ·å
- password: å¯†ç ï¼ˆåŠ å¯†ï¼‰
- role: è§’è‰²ï¼ˆADMIN/READERï¼‰
- email: é‚®ç®±

## é»˜è®¤è´¦æˆ·
- **ç®¡ç†å‘˜**: ç”¨æˆ·å `admin`, å¯†ç  `admin123`
- **è¯»è€…**: ç”¨æˆ·å `reader`, å¯†ç  `reader123`

## è®¿é—®åœ°å€
- å‰ç«¯åº”ç”¨: http://150.158.125.55:3000
- APIç½‘å…³: http://150.158.125.55:8080

## è®¸å¯è¯
MIT License